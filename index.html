<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Stopki</title>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; background: #f8f9fa; }
        #loginScreen {
            position: fixed;
            inset: 0;
            background: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        #loginBox {
            background: white;
            padding: 40px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 25px rgba(0,0,0,0.18);
            text-align: center;
            width: 360px;
            max-width: 90%;
        }
        h2 { margin: 0 0 20px; color: #22346c; }
        input[type="password"] {
            padding: 12px;
            width: 240px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            margin-top: 15px;
            padding: 12px 40px;
            background: #22346c;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover { background: #1a2855; }
        .error { color: #c00; margin-top: 12px; font-size: 14px; }
        #mainContent { display: none; padding: 30px; max-width: 900px; margin: 0 auto; }
    </style>
</head>
<body>

<div id="loginScreen">
    <div id="loginBox">
        <h2>Generator stopki e-mail</h2>
        <p>Podaj hasło:</p>
        <input type="password" id="passInput" autofocus>
        <br>
        <button onclick="checkPassword()">Wejdź</button>
        <div id="errorMsg" class="error"></div>
    </div>
</div>

<div id="mainContent">

<h2>Formularz do wprowadzenia danych stopki</h2>
<form id="signatureForm">
    <label for="title">Tytuł naukowy:</label><br>
    <input type="text" id="title" name="title"><br><br>

    <label for="name">Imię i nazwisko:</label><br>
    <input type="text" id="name" name="name"><br><br>

    <label for="position">Stanowisko:</label><br>
    <input type="text" id="position" name="position"><br><br>

    <label for="department">Dział:</label><br>
    <input type="text" id="department" name="department"><br><br>

    <label for="phone">Numer telefonu:</label><br>
    <input type="text" id="phone" name="phone"><br><br>

    <label for="email">Adres e-mail:</label><br>
    <input type="email" id="email" name="email"><br><br>

    <button type="button" onclick="generateSignature()" style="padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #22346c; border: none; border-radius: 5px; cursor: pointer;">Generuj Stopkę</button>
</form>

<h2>Wygenerowana stopka:</h2>
<div id="signatureOutput" style="padding: 10px; margin-top: 10px; border: 1px solid #ccc; border-radius: 5px; background:white;"></div>

<div style="margin-top: 15px;">
    <button onclick="copySignature()" style="padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #22346c; border: none; border-radius: 5px; cursor: pointer;">
        Skopiuj Stopkę
    </button>
    
    <button onclick="copySignatureAsHTML()" style="padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #2e7d32; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
        Skopiuj jako HTML
    </button>
</div>

<a href="https://support.microsoft.com/pl-pl/office/twórca-i-dodawanie-podpisu-e-mail-w-programie-outlook-8ee5d4f4-68fd-464a-a1c1-0e1c80bb27f2#PickTab=Classic_Outlook" target="_blank" style="text-decoration: none;">
    <button style="margin: 10px 10px 0 0; padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #22346c; border: none; border-radius: 5px; cursor: pointer;">
        Instrukcja Outlook
    </button>
</a>
<a href="https://support.google.com/mail/answer/8395?hl=PL&ref_topic=3394219" target="_blank" style="text-decoration: none;">
    <button style="margin: 10px 10px 0 0; padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #22346c; border: none; border-radius: 5px; cursor: pointer;">
        Instrukcja Gmail
    </button>
</a>
<a href="mailto:r.lukowczyk@pans.glogow.pl?subject=Problem%20z%20stopką" style="text-decoration: none;">
    <button style="margin-top: 10px; padding: 10px 20px; font-size: 16px; color: #ffffff; background-color: #22346c; border: none; border-radius: 5px; cursor: pointer;">
        Zgłoś problem
    </button>
</a>

<script>
let currentSignatureHTML = '';

const CORRECT_HASH = "2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824";

async function checkPassword() {
    const input = document.getElementById("passInput").value;
    const error = document.getElementById("errorMsg");

    const encoder = new TextEncoder();
    const data = encoder.encode(input);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

    if (hashHex === CORRECT_HASH) {
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("mainContent").style.display = "block";
    } else {
        error.textContent = "Nieprawidłowe hasło";
    }
}

document.getElementById("passInput").addEventListener("keypress", e => {
    if (e.key === "Enter") checkPassword();
});

function generateSignature() {
    const title = document.getElementById("title").value.trim();
    const name = document.getElementById("name").value.trim();
    const position = document.getElementById("position").value.trim();
    const department = document.getElementById("department").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const email = document.getElementById("email").value.trim();

    currentSignatureHTML = `
    <table cellpadding="0" cellspacing="0" border="0" style="vertical-align: -webkit-baseline-middle; font-size: medium; font-family: Arial;">
        <tbody>
            <tr>
                <td>
                    <table cellpadding="0" cellspacing="0" border="0" style="vertical-align: -webkit-baseline-middle; font-size: medium; font-family: Arial;">
                        <tbody>
                            <tr>
                                <td width="150" style="vertical-align: middle;">
                                    <span style="margin-right: 20px; display: block;">
                                        <img src="https://pans.glogow.pl/wp-content/uploads/logo/logo_pans_mail.png" role="presentation" width="130" style="max-width: 130px;">
                                    </span>
                                </td>
                                <td style="vertical-align: middle;">
                                    <h2 style="margin: 0px; font-size: 18px; color: rgb(0, 0, 0); font-weight: 600;">
                                        <span>${title ? title + " " : ""}${name}</span>
                                    </h2>
                                    <p style="margin: 0px; color: rgb(0, 0, 0); font-size: 14px; line-height: 22px;">
                                        <span>${position}</span>
                                    </p>
                                    <p style="margin: 0px; font-weight: 500; color: rgb(0, 0, 0); font-size: 14px; line-height: 22px;">
                                        <span>${department}</span><span>&nbsp;|&nbsp;</span><span>Państwowa Akademia Nauk Stosowanych w Głogowie</span>
                                    </p>
                                    <p style="color: rgb(0, 0, 0); margin: 0px; font-size: 14px; line-height: 22px;">
                                        <span>NIP: 6932045180</span>
                                    </p>
                                </td>
                                <td width="30"><div style="width: 30px;"></div></td>
                                <td style="width: 1px; border-left: 1px solid rgb(34, 52, 108);"></td>
                                <td width="30"><div style="width: 30px;"></div></td>
                                <td style="vertical-align: middle;">
                                    <table cellpadding="0" cellspacing="0" border="0" style="font-size: medium; font-family: Arial;">
                                        <tbody>
                                            <tr height="25"><td width="30"><img src="https://pans.glogow.pl/wp-content/uploads/logo/telefon.png" alt="tel" width="13"></td><td><a href="tel:${phone}" style="color:#000; text-decoration:none; font-size:14px;">${phone}</a></td></tr>
                                            <tr height="25"><td width="30"><img src="https://pans.glogow.pl/wp-content/uploads/logo/mail.png" alt="mail" width="13"></td><td><a href="mailto:${email}" style="color:#000; text-decoration:none; font-size:14px;">${email}</a></td></tr>
                                            <tr height="25"><td width="30"><img src="https://pans.glogow.pl/wp-content/uploads/logo/www.png" alt="www" width="13"></td><td><a href="https://www.pans.glogow.pl" style="color:#000; text-decoration:none; font-size:14px;">www.pans.glogow.pl</a></td></tr>
                                            <tr height="25"><td width="30"><img src="https://pans.glogow.pl/wp-content/uploads/logo/adres.png" alt="adres" width="13"></td><td><span style="font-size:14px; color:#000;">67-200 Głogów, Piotra Skargi 5</span></td></tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr><td><table style="width:100%;"><tr><td height="30"></td></tr><tr><td style="border-bottom:1px solid rgb(34,52,108);"></td></tr><tr><td height="30"></td></tr></table></td></tr>
        </tbody>
    </table>`.trim();

    document.getElementById("signatureOutput").innerHTML = currentSignatureHTML;
}

function copySignature() {
    if (!currentSignatureHTML) { alert("Najpierw wygeneruj stopkę!"); return; }
    const range = document.createRange();
    range.selectNodeContents(document.getElementById("signatureOutput"));
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand("copy");
    alert("Stopka skopiowana!");
}

function copySignatureAsHTML() {
    if (!currentSignatureHTML) { alert("Najpierw wygeneruj stopkę!"); return; }
    navigator.clipboard.writeText(currentSignatureHTML).then(() => {
        alert("Kod HTML skopiowany do schowka!");
    }).catch(() => {
        alert("Nie udało się skopiować – spróbuj ręcznie zaznaczyć kod.");
    });
}
</script>

</div>

</body>
</html>
